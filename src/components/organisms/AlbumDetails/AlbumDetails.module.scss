// src/pages/AlbumDetails/AlbumDetails.module.scss

// 1. Importation des variables globales
@use '../../../assets/variables' as v;
@use 'sass:color';

.detailsContainer {
  background-color: v.$color-background-light;
  margin: v.$spacing-xl auto;
  max-width: v.$max-width-container;
  width: 100%;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: v.$spacing-md v.$spacing-xl;
  background-color: v.$color-background-light;
  border-bottom: v.$border-width-sm solid v.$color-border;
  margin-bottom: v.$spacing-xl;
  border-radius: v.$border-radius-md v.$border-radius-md 0 0;
  box-shadow: v.$shadow-sm;

  .maisonLink {
    text-decoration: none;
    font-weight: v.$font-weight-medium;
    color: v.$color-text-secondary;
    transition: color v.$transition-speed-normal v.$transition-easing;

    &:hover {
      color: v.$color-primary;
    }
  }

  .editButton {
    display: inline-flex;
    align-items: center;
    gap: v.$spacing-xs;
    padding: v.$spacing-xs v.$spacing-md;
    background-color: v.$color-secondary;
    color: v.$color-text-light;
    border: none;
    border-radius: v.$border-radius-sm;
    text-decoration: none;
    font-weight: v.$font-weight-medium;
    transition: background-color v.$transition-speed-normal v.$transition-easing;
    cursor: pointer;
    white-space: nowrap;

    &:hover {
      background-color: color.adjust(v.$color-secondary, $lightness: -5%);
    }
  }
}

.mainContent {
  display: grid;
  grid-template-columns: 300px 1fr; // Colonne latérale fixe
  gap: v.$spacing-xl;
  padding: 0 v.$spacing-xl v.$spacing-xl;
}

.sidebar {
  background-color: v.$color-background-light;
  border-radius: v.$border-radius-md;
  padding: v.$spacing-lg;
  box-shadow: v.$shadow-md;
  align-self: start; // La sidebar ne s'étire pas
  position: sticky; // La sidebar reste visible lors du défilement
  top: v.$spacing-xl;

  .maisonImage {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: v.$border-radius-sm;
    margin-bottom: v.$spacing-lg;
  }

  .albumName {
    font-size: v.$font-size-h3;
    font-weight: v.$font-weight-bold;
    color: v.$color-text-primary;
    line-height: v.$line-height-heading;
    margin: 0 0 v.$spacing-md 0;
  }

  .meta {
    display: flex;
    flex-direction: column;
    gap: v.$spacing-sm;
    padding-bottom: v.$spacing-lg;
    margin-bottom: v.$spacing-lg;
    border-bottom: v.$border-width-sm solid v.$color-border;
    font-size: v.$font-size-sm;
    color: v.$color-text-secondary;
  }

  .descriptionSection {
    h3 {
      font-size: v.$font-size-lg;
      font-weight: v.$font-weight-semibold;
      color: v.$color-text-primary;
      margin-bottom: v.$spacing-xs;
    }
    p {
      font-size: v.$font-size-sm;
      color: v.$color-text-secondary;
      line-height: v.$line-height-body;
      margin: 0;
    }
  }
}

.photosSection {
  min-width: 0; // Empêche le contenu de la grille de déborder
}

.photosGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: v.$spacing-lg;

  .photoCard {
    border-radius: v.$border-radius-md;
    overflow: hidden;
    box-shadow: v.$shadow-sm;
    background-color: v.$color-background-light;
    transition: transform v.$transition-speed-normal v.$transition-easing, box-shadow v.$transition-speed-normal v.$transition-easing;
    border: 5px solid v.$color-background-light;
    position: relative;
    cursor: pointer;

    &:hover {
      transform: translateY(-#{v.$spacing-xxs});
      box-shadow: v.$shadow-lg;
    }

    .photoImage {
      width: 100%;
      height: 220px;
      object-fit: cover;
      display: block;
    }

    .photoInfo {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
      padding: v.$spacing-xl v.$spacing-md v.$spacing-md;
      opacity: 0;
      transition: opacity v.$transition-speed-normal v.$transition-easing;

      .photoDescription {
        font-size: v.$font-size-sm;
        color: v.$color-text-light;
        margin: 0;
      }
    }

    &:hover .photoInfo {
      opacity: 1;
    }
  }
}

.noPhotos {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: v.$spacing-xxxl v.$spacing-xl;
  background-color: v.$color-background-light;
  border-radius: v.$border-radius-md;
  text-align: center;
  color: v.$color-text-secondary;
  border: v.$border-width-md dashed v.$color-border;

  .noPhotosIcon {
    font-size: 3rem;
    margin-bottom: v.$spacing-md;
    opacity: 0.5;
  }
}

.notFound {
  text-align: center;
  padding: v.$spacing-xxxl;
  font-size: v.$font-size-xl;
  color: v.$color-text-secondary;
}

// --- Styles Responsives ---
@media (max-width: v.$breakpoint-lg) { // Pour tablettes (<= 992px)
  .mainContent {
    grid-template-columns: 1fr; // La sidebar passe au-dessus du contenu
  }
  .sidebar {
    position: static; // On annule le "sticky" sur mobile
    width: 100%;
  }
}

@media (max-width: v.$breakpoint-sm) { // Pour mobiles (<= 576px)
  .detailsContainer {
    margin: v.$spacing-md auto;
  }
  .header {
    padding: v.$spacing-sm v.$spacing-md;
    margin-bottom: v.$spacing-md;
  }
  .mainContent {
    gap: v.$spacing-md;
    padding: 0 v.$spacing-md v.$spacing-md;
  }
  .sidebar {
    padding: v.$spacing-md;
  }
  .photosGrid {
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); // Cartes plus petites
    gap: v.$spacing-md;
  }
}
