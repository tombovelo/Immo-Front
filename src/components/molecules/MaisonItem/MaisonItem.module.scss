@use '../../../assets/variables' as v;
@use 'sass:color';

.card {
  // --- Structure et Apparence ---
  background-color: v.$color-background-light;
  border-radius: v.$border-radius-lg;
  overflow: hidden;
  box-shadow: v.$shadow-md;
  border: v.$border-width-sm solid v.$color-border;
  display: flex;
  flex-direction: column;
  transition: transform v.$transition-speed-normal v.$transition-easing,
    box-shadow v.$transition-speed-normal v.$transition-easing;

  &:hover {
    transform: translateY(-#{v.$spacing-xxs});
    box-shadow: v.$shadow-lg;
  }
}

.cardHeader {
  // --- Header Structure ---
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: v.$spacing-sm v.$spacing-md;
  background-color: v.$color-background-light;
  border-bottom: v.$border-width-sm solid v.$color-border;

  .ville {
    // --- City Text ---
    font-weight: v.$font-weight-semibold;
    font-size: v.$font-size-base;
    color: v.$color-text-primary;
    margin: 0;
  }
}

.transactionBadge {
  // --- Badge Style ---
  background-color: v.$color-secondary;
  color: v.$color-text-light;
  padding: v.$spacing-xxs v.$spacing-sm;
  border-radius: v.$border-radius-full;
  font-size: v.$font-size-xs;
  font-weight: v.$font-weight-bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.imageContainer {
  // --- Image Container ---
  position: relative;
  width: 100%;
  height: 200px;

  img {
    // --- Image Style ---
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

.addressOverlay {
  // --- Overlay Style ---
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: v.$spacing-md;
  background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, transparent 100%);
  color: v.$color-text-light;

  // --- Targeting IconText Component ---
  > div {
    > span > svg {
      color: v.$color-text-light;
    }
  }
}

.cardBody {
  // --- Body Structure ---
  padding: v.$spacing-md;
  display: flex;
  flex-direction: column;
  gap: v.$spacing-sm;
  flex-grow: 1;
}

.price {
  // --- Price Text ---
  font-size: v.$font-size-h3;
  font-weight: v.$font-weight-bold;
  color: v.$color-primary;
  margin: 0 0 v.$spacing-xs 0;
}

.statsGrid {
  // --- Stats Grid Structure ---
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: v.$spacing-md;
  padding-bottom: v.$spacing-sm;
  border-bottom: v.$border-width-sm solid v.$color-border;
  color: v.$color-text-secondary;
  font-size: v.$font-size-sm;
}

.statusBadge {
  // --- Status Badge Style ---
  display: inline-flex;
  align-items: center;
  gap: v.$spacing-xxs;
  padding: v.$spacing-xxs v.$spacing-sm;
  border-radius: v.$border-radius-full;
  font-size: v.$font-size-xs;
  font-weight: v.$font-weight-semibold;
  align-self: flex-start;
  margin-top: v.$spacing-xxs;

  &.visible {
    background-color: color.change(v.$color-success, $alpha: 0.15);
    color: color.adjust(v.$color-success, $lightness: -15%);

    svg {
      color: color.adjust(v.$color-success, $lightness: -15%);
    }
  }

  &.hidden {
    background-color: color.change(v.$color-error, $alpha: 0.1);
    color: color.adjust(v.$color-error, $lightness: -10%);

    svg {
      color: color.adjust(v.$color-error, $lightness: -10%);
    }
  }
}

.cardFooter {
  // --- Footer Structure ---
  padding: 0 v.$spacing-md v.$spacing-md;
  margin-top: auto;

  button {
    // --- Button Style ---
    width: 100%;
  }
}

/* --- Media Queries for Responsiveness --- */
@media (max-width: v.$breakpoint-md) {
  .cardHeader {
    padding: v.$spacing-xs v.$spacing-sm;

    .ville {
      font-size: v.$font-size-sm;
    }
  }

  .transactionBadge {
    font-size: v.$font-size-xs;
    padding: v.$spacing-xxs v.$spacing-xs;
  }

  .imageContainer {
    height: 160px; /* Adjust image height for smaller screens */
  }

  .addressOverlay {
    padding: v.$spacing-sm;
  }

  .cardBody {
    padding: v.$spacing-sm;
    gap: v.$spacing-xs;
  }

  .price {
    font-size: v.$font-size-lg;
  }

  .statsGrid {
    font-size: v.$font-size-xs;
    padding-bottom: v.$spacing-xs;
    gap: v.$spacing-xs;
  }

  .cardFooter {
    padding: 0 v.$spacing-sm v.$spacing-sm;
  }
}
