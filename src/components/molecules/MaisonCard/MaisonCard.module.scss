@use '../../../assets/variables' as v;
@use 'sass:color';

.card {
  // --- Structure et Apparence ---
  background-color: v.$color-background-light;
  border-radius: v.$border-radius-lg;
  overflow: hidden;
  box-shadow: v.$shadow-md;
  border: v.$border-width-sm solid v.$color-border;
  display: flex;
  flex-direction: column;
  height: 100%;
  transition: transform v.$transition-speed-normal v.$transition-easing,
    box-shadow v.$transition-speed-normal v.$transition-easing;

  &:hover {
    transform: translateY(-#{v.$spacing-xs});
    box-shadow: v.$shadow-lg;
  }
}

.cardHeader {
  // --- Header Structure ---
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: v.$spacing-sm v.$spacing-md;
  background-color: v.$color-background-light;
  border-bottom: v.$border-width-sm solid v.$color-border;

  .ville {
    // --- City Text ---
    font-weight: v.$font-weight-semibold;
    font-size: v.$font-size-base;
    color: v.$color-text-primary;
  }
}

.transactionBadge {
  // --- Badge Style ---
  background-color: v.$color-primary;
  color: v.$color-text-light;
  padding: v.$spacing-xxs v.$spacing-sm;
  border-radius: v.$border-radius-full;
  font-size: v.$font-size-xs;
  font-weight: v.$font-weight-bold;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.imageContainer {
  // --- Image Container ---
  position: relative;
  width: 100%;
  height: 220px;

  img {
    // --- Image Style ---
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

.imageOverlay {
  // --- Overlay Style ---
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: v.$spacing-lg v.$spacing-md v.$spacing-md;
  background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, transparent 100%);
  cursor: pointer;
  color: v.$color-text-light;

  // --- Targeting IconText Component ---
  > div {
    > svg {
      color: v.$color-text-light;
    }
  }
}

.cardBody {
  // --- Body Structure ---
  padding: v.$spacing-md;
  display: flex;
  flex-direction: column;
  gap: v.$spacing-md;
  flex-grow: 1;
}

.cardStats {
  // --- Stats Structure ---
  display: flex;
  justify-content: space-between;
  align-items: center;

  // --- IconText Styling ---
  > div {
    color: v.$color-text-secondary;

    svg {
      color: v.$color-primary;
    }
  }
}

.price {
  // --- Price Text ---
  font-size: v.$font-size-base;
  font-weight: v.$font-weight-bold;
  color: v.$color-text-primary;
  margin: 0;
  text-align: right;
}

.cardOwner {
  // --- Owner Structure ---
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: v.$spacing-md;
  padding-top: v.$spacing-sm;
  border-top: v.$border-width-sm solid v.$color-border;
  font-size: v.$font-size-sm;

  // --- IconText Styling ---
  > div {
    color: v.$color-text-secondary;

    svg {
      color: v.$color-text-secondary;
    }
  }
}

.cardFooter {
  // --- Footer Structure ---
  padding: 0 v.$spacing-md v.$spacing-md;
  margin-top: auto;

  // --- Button Styling ---
  button {
    background-color: v.$color-primary;
    color: v.$color-text-light;
    width: 100%;
    transition: background-color v.$transition-speed-normal v.$transition-easing;

    &:hover {
      background-color: color.adjust(v.$color-primary, $lightness: -5%);
    }
  }
}

/* --- Media Queries for Responsiveness --- */
@media (max-width: v.$breakpoint-md) {
  .cardHeader {
    padding: v.$spacing-xs v.$spacing-sm;

    .ville {
      font-size: v.$font-size-sm;
    }
  }

  .transactionBadge {
    font-size: v.$font-size-xs;
    padding: v.$spacing-xxs v.$spacing-xs;
  }

  .imageContainer {
    height: 180px; /* Adjust image height for smaller screens */
  }

  .imageOverlay {
    padding: v.$spacing-lg v.$spacing-sm v.$spacing-sm;
  }

  .cardBody {
    padding: v.$spacing-sm;
    gap: v.$spacing-sm;
  }

  .price {
    font-size: v.$font-size-sm;
  }

  .cardOwner {
    font-size: v.$font-size-xs;
    padding-top: v.$spacing-xs;
    gap: v.$spacing-xs;
  }

  .cardFooter {
    padding: 0 v.$spacing-sm v.$spacing-sm;
  }
}
